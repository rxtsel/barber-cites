{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","showServices","mostrarSeccion","cambiarSeccion","pgNext","pgPrev","btnPg","mostrarResumen","nombreCita","fechaCita","inactiveDatePrev","horaCita","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","result","fetch","typeResult","json","servicio","id","precio","title","nombreServicio","createElement","textContent","precioServicio","contenedorServicio","idServicio","titleAtr","createAttribute","value","setAttributeNode","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","deleteService","addService","firstElementChild","nextElementSibling","next","prev","contentResume","firstChild","removeChild","Object","values","includes","noServicios","resumenCita","innerHTML","servicioCita","headingServicios","cantidad","totalServicio","split","trim","totalPagar","servicioObj","filter","nombretexto","length","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","inputFecha","fechaActual","year","getFullYear","day","getDate","month","getMonth","fechaDesabilitar","min","horaInput"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\nconst cita = {\n  nombre: '',\n  fecha: '',\n  hora: '',\n  servicios: []\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  iniciarApp();\n});\n\nfunction iniciarApp() {\n  showServices();\n\n  // funcion que resalta tab\n  mostrarSeccion();\n\n  // funcion que muestra u oculta una seccion\n  cambiarSeccion();\n\n  // paginador siguiente\n  pgNext();\n\n  // paginador anterior\n  pgPrev();\n\n  // comprueba la pg actual para mostrar u ocultar el paginador\n  btnPg();\n  \n  // muestra mensaje de cita o mensaje de error\n  mostrarResumen();\n\n  // guarda el nombre de la cita en el objeto\n  nombreCita();\n\n  // almacena las fechas en el objeto\n  fechaCita();\n\n  // desabilitar dias pasados\n  inactiveDatePrev();\n\n  // almacena la hora de la cita en el objeto\n  horaCita();\n};\n\nfunction mostrarSeccion(){\n  //  eliminar showSeccion de la seccion anterior\n  const seccionAnterior = document.querySelector('.show-seccion');\n  if (seccionAnterior) {\n      seccionAnterior.classList.remove('show-seccion');\n  }\n\n  const seccionActual = document.querySelector(`#paso-${pagina}`);\n  seccionActual.classList.add('show-seccion');\n\n  //  eliminar clase actual del tab anterior\n  const tabAnterior = document.querySelector('.tabs .actual');\n  if (tabAnterior) {\n    tabAnterior.classList.remove('actual');\n  }\n\n  // resalta tab actual\n  const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\n  tab.classList.add('actual');\n\n}\n\nfunction cambiarSeccion(){\n const enlaces = document.querySelectorAll('.tabs button');\n enlaces.forEach(enlace => {\n  enlace.addEventListener('click', e => {\n   e.preventDefault();\n   pagina = parseInt(e.target.dataset.paso);\n\n  // llama funcion que muestra seccion\n  mostrarSeccion();\n\n  // llamar botones paginador\n  btnPg();\n  }); \n });\n};\n\nasync function showServices() {\n  try {\n    const result = await fetch('./servicios.json');\n    const typeResult = await result.json();\n    const { servicios } = typeResult;\n\n    // generar html\n    servicios.forEach(servicio => {\n      const { id, nombre, precio, title } = servicio;\n\n      // DOM Scripting\n      const nombreServicio = document.createElement('H3');\n      nombreServicio.textContent = nombre;\n      nombreServicio.classList.add('nombreServicio');\n\n      const precioServicio = document.createElement('P');\n      precioServicio.textContent = `$ ${precio}.000`\n      precioServicio.classList.add('precioServicio');\n\n      const contenedorServicio = document.createElement('DIV');\n      contenedorServicio.classList.add('contenedorServicio');\n      contenedorServicio.dataset.idServicio = id;\n\n      const titleAtr = document.createAttribute('title');\n      titleAtr.value = `${title}`;\n      precioServicio.setAttributeNode(titleAtr);\n\n      // Seleccion de servicio\n      contenedorServicio.onclick = seleccionarServicio;\n      contenedorServicio.appendChild(nombreServicio);\n      contenedorServicio.appendChild(precioServicio);\n\n      document.querySelector('#servicios').appendChild(contenedorServicio);\n\n    });\n\n  } catch (error) {\n    console.log('error al descargar servicios');\n  }\n}\n\n// FUNCION SELECCIONAR SERVICIO\nfunction seleccionarServicio(e) {\n\n  let elemento;\n  // si da click en un p o un h3 entonces forzamos a que de click al div con el dataid\n  if (e.target.tagName === 'P' || e.target.tagName === 'H3') {\n    elemento = e.target.parentElement;\n  } else {\n    elemento = e.target;\n  }\n\n  if (elemento.classList.contains('seleccionado')) {\n    elemento.classList.remove('seleccionado');\n\n    const id = parseInt(elemento.dataset.idServicio);\n    deleteService(id);\n  } else {\n    elemento.classList.add('seleccionado');\n\n    const servicioObj = {\n      id: parseInt(elemento.dataset.idServicio),\n      nombre: elemento.firstElementChild.textContent,\n      precio: elemento.firstElementChild.nextElementSibling.textContent\n    }\n    addService(servicioObj);\n  };\n}\n\nfunction pgPrev() {\n  const prev = document.querySelector('#prev');\n  prev.addEventListener('click', () => {\n    pagina--;\n    btnPg();\n  });\n};\n\nfunction pgNext(){\n  const next = document.querySelector('#next');\n  next.addEventListener('click', () => {\n    pagina++;\n    btnPg();\n  });\n};\n\nfunction btnPg(){\n  const next = document.querySelector('#next');\n  const prev = document.querySelector('#prev');\n\n  if(pagina == 1){\n    prev.classList.add('hidden');\n  }else if(pagina == 3){\n    next.classList.add('hidden');\n    prev.classList.remove('hidden');\n    mostrarResumen();\n  } else {\n    prev.classList.remove('hidden');\n    next.classList.remove('hidden');\n  }\n\n  mostrarSeccion(); // cambia seccion que se muestra\n};\n\nfunction mostrarResumen() {\n  // destructuring\n  const { nombre, fecha, hora, servicios } = cita;\n\n  // seleccionar div de resumen\n  const contentResume = document.querySelector('.resumen');\n\n  // limpia html\n  while(contentResume.firstChild){\n    contentResume.removeChild(contentResume.firstChild);\n  }\n\n  // validacion\n  if (Object.values(cita).includes('')) {\n    const noServicios = document.createElement('P');\n    noServicios.textContent = 'Faltan datos de servicios, fecha, hora o nombre';\n    noServicios.classList.add('invalid-cite');\n    // agregar al resumen\n    contentResume.appendChild(noServicios);\n    return;\n  }\n\n  // mostrar resumen\n\n  const resumenCita = document.createElement('H3');\n  resumenCita.classList.add('resumen-cita');\n  resumenCita.textContent = 'Resumen de cita';\n\n  const nombreCita = document.createElement('P');\n  nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`\n\n  const fechaCita = document.createElement('P');\n  fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`\n\n  const horaCita = document.createElement('P');\n  horaCita.innerHTML = `<span>Hora:</span> ${hora}`\n\n  const servicioCita = document.createElement('DIV');\n  servicioCita.classList.add('resumen-servicios');\n\n  const headingServicios = document.createElement('H3');\n  headingServicios.classList.add('heading-servicios');\n  headingServicios.textContent = 'Tus servicios';\n\n  let cantidad = 0;\n\n  // iterar por los servicios del arreglo\n  servicios.forEach( servicio => {\n    const {nombre, precio} = servicio;\n\n    const contenedorServicio = document.createElement('DIV');\n    contenedorServicio.classList.add('contenedor-servicio');\n\n    const nombreServicio = document.createElement('P');\n    nombreServicio.textContent = nombre;\n\n    const precioServicio = document.createElement('P');\n    precioServicio.classList.add('precio-servicio');\n    precioServicio.textContent = precio;\n\n    const totalServicio = precio.split('$') \n    // console.log( parseInt(totalServicio[1].trim()) );\n    cantidad += parseInt(totalServicio[1].trim());\n\n    // agregar nombre y precio a contenedor servicio\n    contenedorServicio.appendChild(nombreServicio);\n    contenedorServicio.appendChild(precioServicio);\n    servicioCita.appendChild(contenedorServicio);\n\n  });\n  \n  contentResume.appendChild(resumenCita);\n  contentResume.appendChild(nombreCita);\n  contentResume.appendChild(fechaCita);\n  contentResume.appendChild(horaCita);\n  contentResume.appendChild(headingServicios);\n  contentResume.appendChild(servicioCita);\n\n  const totalPagar = document.createElement('P');\n  totalPagar.classList.add('total-pagar');\n  totalPagar.innerHTML = `Total a pagar: <span>$${cantidad}.000</span>`;\n\n  contentResume.appendChild(totalPagar);\n};\n\nfunction addService(servicioObj) {\n  const { servicios } = cita;\n  cita.servicios = [...servicios, servicioObj];\n};\n\nfunction deleteService(id) {\n  const { servicios } = cita;\n  cita.servicios = servicios.filter(servicio => servicio.id !== id);\n};\n\nfunction nombreCita() {\n  const nombreInput = document.querySelector('#nombre');\n  nombreInput.addEventListener('input', e => {\n    const nombretexto = e.target.value.trim();\n    if (nombretexto == '' || nombretexto.length <= 2) {\n      alerta('Nombre no valido', 'error');\n    } else {\n      const alerta = document.querySelector('.alerta');\n      if (alerta) {\n        alerta.remove();\n      }\n      cita.nombre = nombretexto;\n    }\n  });\n};\n\nfunction alerta(mensaje, tipo) {\n  const alertaPrevia = document.querySelector('.alerta');\n  if (alertaPrevia) {\n    return;\n  }\n\n  const alerta = document.createElement('DIV');\n  alerta.textContent = mensaje;\n  alerta.classList.add('alerta');\n  if (tipo == 'error') {\n    alerta.classList.add('error');\n  }\n\n  const form = document.querySelector('.form');\n\n  form.appendChild(alerta);\n\n  // remover alerta a ls 3s\n  setTimeout(() => {\n    alerta.remove();\n  }, 3000);\n};\n\nfunction fechaCita() {\n  const fechaInput = document.querySelector('#fecha');\n  fechaInput.addEventListener('input', e => {\n    const dia = new Date(e.target.value).getUTCDay();\n    if ([0].includes(dia)) {\n      alerta('Los domingos sólo trabajamos hasta medio día', 'error')\n      cita.fecha = fechaInput.value;\n    } else if ([6].includes(dia)) {\n      alerta('Los sabados atendemos hasta las 7pm', 'error');\n      cita.fecha = fechaInput.value;\n    } else {\n      cita.fecha = fechaInput.value;\n    }\n  })\n};\n\nfunction inactiveDatePrev() {\n  const inputFecha = document.querySelector('#fecha');\n\n  const fechaActual = new Date();\n  const year = fechaActual.getFullYear();\n  const day = fechaActual.getDate() + 1;\n  const month = fechaActual.getMonth() + 1;\n\n  // formato deseado AAAA-MM-DD\n  if (month < 10) {\n    var newMonth = '0' + month;\n  } else {\n    return month;\n  }\n  const fechaDesabilitar = `${year}-${newMonth}-${day}`;\n  // fecha a desabilitar\n  inputFecha.min = fechaDesabilitar;\n};\n\nfunction horaCita(){\n  const horaInput = document.querySelector('#hora');\n  horaInput.addEventListener('input', e => {\n    const horaCita = e.target.value;\n    const hora = horaCita.split(':')\n    if(hora[0] < 8 || hora[0] > 22){\n      alerta(`Sólo atendemos de 8AM a 10PM`, 'error')\n      setTimeout(() => {\n        horaInput.value = ''\n      }, 3000);\n    }else {\n      cita.hora = horaCita;\n    }\n  });\n};"]}